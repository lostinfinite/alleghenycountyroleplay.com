<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="0" />
		<title>CAD</title>
		<style>
			:root {
				--bg: #0b1020;
				--panel: #121a33;
				--border: #243055;
				--muted: #a9b4d8;
				--text: #e8eefc;
				--accent: #2a8242;
				--accent-border: #2e5b3a;
				--btn: #223059;
				--btn-border: #2d3d6e;
			}
			* { box-sizing: border-box }
			body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background: var(--bg); color: var(--text); }
			header { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border-bottom: 1px solid var(--border); background: var(--panel); position: sticky; top: 0; z-index: 10; }
			.nav-left { color: var(--muted); font-variant-numeric: tabular-nums; }
			.nav-right { margin-left: auto; display: flex; gap: 10px; align-items: center; }
			.identity { display: inline-flex; align-items: center; gap: 8px; }
			.identity img { width: 32px; height: 32px; border-radius: 50%; border: 1px solid var(--btn-border); background: var(--bg); }
			.muted { color: var(--muted); }
			.btn { background: var(--btn); color: var(--text); border: 1px solid var(--btn-border); border-radius: 6px; padding: 6px 10px; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; gap: 6px; }
			.btn.primary { background: var(--accent); border-color: var(--accent-border); }
			main { padding: 20px; max-width: 980px; margin: 0 auto; }
			h1 { margin: 0 0 12px; }
			h2 { margin: 18px 0 8px; }
			.card { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 16px; }
			.grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
			.table { width: 100%; border-collapse: collapse; }
			.table td { padding: 6px 8px; border-bottom: 1px solid var(--border); vertical-align: top; }
			.table td.label { width: 160px; color: var(--muted); }
			.profile { display: grid; grid-template-columns: 96px 1fr; gap: 16px; align-items: start; }
			.profile img { width: 96px; height: 96px; border-radius: 12px; border: 1px solid var(--btn-border); background: var(--bg); }
			.hr-text { display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 12px; margin: 18px 0; }
			.hr-text::before, .hr-text::after { content: ""; height: 1px; background: var(--border); display: block; }
			.copy-row { display: flex; gap: 8px; align-items: center; }
			.copy-input { flex: 1; background: #0c142b; border: 1px solid var(--btn-border); color: var(--text); border-radius: 6px; padding: 8px 10px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
			.hidden { display: none !important; }
			.sensitive-blur { filter: blur(18px); transition: filter .2s ease; }
			@media (max-width: 720px) {
				.profile { grid-template-columns: 64px 1fr; }
				.profile img { width: 64px; height: 64px; }
				.table td.label { width: 120px; }
			}
		</style>
		<noscript><style>main{display:none}</style><div style="padding:16px;color:#fff;background:#a00">JavaScript required.</div></noscript>
		<meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https://cdn.discordapp.com; script-src 'self'; style-src 'self' 'unsafe-inline'; style-src-elem 'self' https://fonts.googleapis.com; font-src 'self' data: https://fonts.gstatic.com; connect-src 'self' https://cadapi.alleghenycountyroleplay.com http://127.0.0.1:8787 http://localhost:8787; base-uri 'self'; form-action 'self'">
	</head>
	<body>
		<header>
			<div class="nav-left" id="now">--:--</div>
			<div class="nav-right">
				<div class="identity" id="identity" aria-live="polite">
					<img id="avatar" alt="avatar" />
					<span id="username" class="muted"></span>
					<span class="muted">|</span>
					<span id="department"></span>
				</div>
				<button id="logoutBtn" class="btn" style="display:none">Logout</button>
				<a id="loginBtn" class="btn primary" href="https://cadapi.alleghenycountyroleplay.com/login">Login</a>
			</div>
		</header>
		<main id="content">
			<section id="loggedOut" class="card">
				<h1>You are not logged in! Please login to view department information</h1>
				<div style="margin-top:12px">
					<a id="loginBtn2" class="btn primary" href="https://cadapi.alleghenycountyroleplay.com/login">Login</a>
				</div>
			</section>

			<section id="loggedIn" class="grid hidden">
				<div class="card">
					<h1>Department Info</h1>
					<div class="hr-text">Your Info</div>
					<div class="profile">
						<img id="p_avatar" alt="profile" />
						<table class="table">
							<tr><td class="label">Username</td><td id="p_username"></td></tr>
							<tr><td class="label">User ID</td><td id="p_userid"></td></tr>
							<tr><td class="label">Department(s)</td><td id="p_dept"></td></tr>
						</table>
					</div>
				</div>

				<div id="deptSections" class="grid"></div>
			</section>
		</main>
		<script src="cad.js?v=1761583400"></script>
	</body>
	</html>
